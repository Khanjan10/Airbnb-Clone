<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">
        <img src="/assets/logo.jpg" alt="StayEase Logo" width="120" height="50">
      </a>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link" href="/listings">Home</a>
          <a class="nav-link" href="/listings/new">Add New Listings</a>
          <!-- <a class="nav-link" href="/listings">All Listings</a> -->
        </div>

        <div class="navbar-nav ms-auto">
          <form class="d-flex" role="search">
            <input class="form-control me-3 search-input" id="search-box" type="search" placeholder="Search">
            <button class="btn btn-search" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
          </form>
        </div>

        <div class="navbar-nav ms-auto">
          <% if (!currUser) { %>
          <a class="nav-link" href="/signup"><b>Sign up</b></a>
          <a class="nav-link" href="/login"><b>Login</b></a>
          <% } %>
          <% if(currUser) { %>
          <a class="nav-link" href="/logout"><b>Logout</b></a>
          <% } %>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
    const searchBox = document.getElementById("search-box");
    const searchForm = document.querySelector(".d-flex");
    const listings = document.querySelectorAll(".listing-link"); // Select <a> elements

    // Prevent form submission (avoid page reload)
    searchForm.addEventListener("submit", function (event) {
        event.preventDefault();
    });

    // Search functionality
    searchBox.addEventListener("input", function () {
        let filter = this.value.toLowerCase().trim();

        listings.forEach((listing) => {
            let titleElement = listing.querySelector(".listing-title"); 
            if (titleElement) {
                let title = titleElement.innerText.toLowerCase();

                if (title.includes(filter)) {
                    listing.style.display = ""; // Reset to default
                    listing.classList.remove("d-none"); // Remove Bootstrap hidden class
                } else {
                    listing.style.display = "none"; // Hide
                    listing.classList.add("d-none"); // Add Bootstrap hidden class
                }
            }
        });
    });
});


    </script>
  </nav>